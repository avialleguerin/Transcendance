let currentSkinPlayer1_multi = 0;
let currentSkinPlayer2_multi = 0;
let currentSkinPlayer3_multi = 0;
let currentSkinPlayer4_multi = 0;
let defaultSkinPlayer1 = 0;
let defaultSkinPlayer2 = 0;
let defaultSkinPlayer3 = 0;
let defaultSkinPlayer4 = 0;
const skinPaths = [
    { name: "player_skin_1", path: "/srcs/game/assets/player_skin/", file: "player_blanc.glb" },
    { name: "player_skin_2", path: "/srcs/game/assets/player_skin/", file: "player_bleuv2.glb" },
    { name: "player_skin_3", path: "/srcs/game/assets/player_skin/", file: "player_rougev2.glb" },
    { name: "player_skin_4", path: "/srcs/game/assets/player_skin/", file: "player_vert.glb" }
];
let player1Skins_multi = [];
let player2Skins_multi = [];
let player3Skins_multi = [];
let player4Skins_multi = [];
function loadSkin(skin, scene, x, y, z, scaleX, scaleY, scaleZ) {
    return new Promise((resolve, reject) => {
        BABYLON.SceneLoader.ImportMesh("", skin.path, skin.file, scene, (meshes) => {
            const rootMesh = meshes.find(mesh => mesh.name === "__root__");
            if (rootMesh) {
                rootMesh.position = new BABYLON.Vector3(x, y, z);
                rootMesh.scaling = new BABYLON.Vector3(scaleX, scaleY, scaleZ);
                rootMesh.rotation = new BABYLON.Vector3(0, 0, 0);
                rootMesh.metadata = { isPlayer_skin_menu: true };
                rootMesh.setEnabled(false);
                resolve(rootMesh);
            }
            else {
                reject(`Erreur lors du chargement de ${skin.name}`);
            }
        });
    });
}
function loadSkinsForPlayer(skinPaths, scene, playerSkins, offsetX, offsetY, offsetZ, scaleX, scaleY, scaleZ) {
    let loadPromises = skinPaths.map((skin) => loadSkin(skin, scene, offsetX, offsetY, offsetZ, scaleX, scaleY, scaleZ));
    Promise.all(loadPromises)
        .then((meshes) => {
        meshes.forEach((mesh) => {
            mesh.position = new BABYLON.Vector3(offsetX, offsetY, offsetZ);
            playerSkins.push(mesh);
        });
    })
        .catch((error) => {
        console.error(error);
    });
}
export function init_skins_perso_player1_multi(scene) {
    loadSkinsForPlayer(skinPaths, scene, player1Skins_multi, -16, 100, -28, 4, 4, 4);
}
export function init_skins_perso_player2_multi(scene) {
    loadSkinsForPlayer(skinPaths, scene, player2Skins_multi, -27, 100, -28, 4, 4, 4);
}
export function init_skins_perso_player3_multi(scene) {
    loadSkinsForPlayer(skinPaths, scene, player3Skins_multi, -14.5, 100, -2, 2.5, 2.5, 2.5);
}
export function init_skins_perso_player4_multi(scene) {
    loadSkinsForPlayer(skinPaths, scene, player4Skins_multi, -26.5, 100, -2, 2.5, 2.5, 2.5);
}
export function enable_skin_multi() {
    if (player1Skins_multi.length === 0)
        return;
    if (player2Skins_multi.length === 0)
        return;
    if (player3Skins_multi.length === 0)
        return;
    if (player4Skins_multi.length === 0)
        return;
    player1Skins_multi.forEach(skin => skin.setEnabled(false));
    player1Skins_multi[defaultSkinPlayer1].setEnabled(true);
    player2Skins_multi.forEach(skin => skin.setEnabled(false));
    player2Skins_multi[defaultSkinPlayer2].setEnabled(true);
    player3Skins_multi.forEach(skin => skin.setEnabled(false));
    player3Skins_multi[defaultSkinPlayer3].setEnabled(true);
    player4Skins_multi.forEach(skin => skin.setEnabled(false));
    player4Skins_multi[defaultSkinPlayer4].setEnabled(true);
}
export function disable_skin_multi() {
    if (player1Skins_multi.length === 0)
        return;
    if (player2Skins_multi.length === 0)
        return;
    if (player3Skins_multi.length === 0)
        return;
    if (player4Skins_multi.length === 0)
        return;
    player1Skins_multi[currentSkinPlayer1_multi].setEnabled(false);
    currentSkinPlayer1_multi = defaultSkinPlayer1;
    player2Skins_multi[currentSkinPlayer2_multi].setEnabled(false);
    currentSkinPlayer2_multi = defaultSkinPlayer2;
    player3Skins_multi[currentSkinPlayer3_multi].setEnabled(false);
    currentSkinPlayer3_multi = defaultSkinPlayer3;
    player4Skins_multi[currentSkinPlayer4_multi].setEnabled(false);
    currentSkinPlayer4_multi = defaultSkinPlayer4;
}
export function disable_skin_and_save_multi() {
    if (player1Skins_multi.length === 0)
        return;
    if (player2Skins_multi.length === 0)
        return;
    if (player3Skins_multi.length === 0)
        return;
    if (player4Skins_multi.length === 0)
        return;
    player1Skins_multi[currentSkinPlayer1_multi].setEnabled(false);
    player2Skins_multi[currentSkinPlayer2_multi].setEnabled(false);
    player3Skins_multi[currentSkinPlayer3_multi].setEnabled(false);
    player4Skins_multi[currentSkinPlayer4_multi].setEnabled(false);
}
export function switch_skin_perso_player1_right_multi() {
    if (player1Skins_multi.length === 0)
        return;
    player1Skins_multi[currentSkinPlayer1_multi].setEnabled(false);
    currentSkinPlayer1_multi = (currentSkinPlayer1_multi + 1) % player1Skins_multi.length;
    player1Skins_multi[currentSkinPlayer1_multi].setEnabled(true);
}
export function switch_skin_perso_player1_left_multi() {
    if (player1Skins_multi.length === 0)
        return;
    player1Skins_multi[currentSkinPlayer1_multi].setEnabled(false);
    currentSkinPlayer1_multi = (currentSkinPlayer1_multi - 1 + player1Skins_multi.length) % player1Skins_multi.length;
    player1Skins_multi[currentSkinPlayer1_multi].setEnabled(true);
}
export function switch_skin_perso_player2_right_multi() {
    if (player2Skins_multi.length === 0)
        return;
    player2Skins_multi[currentSkinPlayer2_multi].setEnabled(false);
    currentSkinPlayer2_multi = (currentSkinPlayer2_multi + 1) % player2Skins_multi.length;
    player2Skins_multi[currentSkinPlayer2_multi].setEnabled(true);
}
export function switch_skin_perso_player2_left_multi() {
    if (player2Skins_multi.length === 0)
        return;
    player2Skins_multi[currentSkinPlayer2_multi].setEnabled(false);
    currentSkinPlayer2_multi = (currentSkinPlayer2_multi - 1 + player2Skins_multi.length) % player2Skins_multi.length;
    player2Skins_multi[currentSkinPlayer2_multi].setEnabled(true);
}
export function switch_skin_perso_player3_right_multi() {
    if (player3Skins_multi.length === 0)
        return;
    player3Skins_multi[currentSkinPlayer3_multi].setEnabled(false);
    currentSkinPlayer3_multi = (currentSkinPlayer3_multi + 1) % player3Skins_multi.length;
    player3Skins_multi[currentSkinPlayer3_multi].setEnabled(true);
}
export function switch_skin_perso_player3_left_multi() {
    if (player3Skins_multi.length === 0)
        return;
    player3Skins_multi[currentSkinPlayer3_multi].setEnabled(false);
    currentSkinPlayer3_multi = (currentSkinPlayer3_multi - 1 + player3Skins_multi.length) % player3Skins_multi.length;
    player3Skins_multi[currentSkinPlayer3_multi].setEnabled(true);
}
export function switch_skin_perso_player4_right_multi() {
    if (player4Skins_multi.length === 0)
        return;
    player4Skins_multi[currentSkinPlayer4_multi].setEnabled(false);
    currentSkinPlayer4_multi = (currentSkinPlayer4_multi + 1) % player4Skins_multi.length;
    player4Skins_multi[currentSkinPlayer4_multi].setEnabled(true);
}
export function switch_skin_perso_player4_left_multi() {
    if (player4Skins_multi.length === 0)
        return;
    player4Skins_multi[currentSkinPlayer4_multi].setEnabled(false);
    currentSkinPlayer4_multi = (currentSkinPlayer4_multi - 1 + player4Skins_multi.length) % player4Skins_multi.length;
    player4Skins_multi[currentSkinPlayer4_multi].setEnabled(true);
}
export { currentSkinPlayer1_multi, currentSkinPlayer2_multi, currentSkinPlayer3_multi, currentSkinPlayer4_multi, player1Skins_multi, player2Skins_multi, player3Skins_multi, player4Skins_multi };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdF9za2luX3BlcnNvX211bHRpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHVibGljL3NyY3MvZ2FtZS9nYW1lcGxheS9tdWx0aXBsYXllci9pbml0X3NraW5fcGVyc29fbXVsdGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLENBQUM7QUFDakMsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLENBQUM7QUFDakMsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLENBQUM7QUFDakMsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLENBQUM7QUFFakMsSUFBSSxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFDM0IsSUFBSSxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFDM0IsSUFBSSxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFDM0IsSUFBSSxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFFM0IsTUFBTSxTQUFTLEdBQUc7SUFDakIsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLEVBQUU7SUFDM0YsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsbUJBQW1CLEVBQUU7SUFDNUYsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsb0JBQW9CLEVBQUU7SUFDN0YsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUU7Q0FDMUYsQ0FBQztBQUVGLElBQUksa0JBQWtCLEdBQUcsRUFBRSxDQUFDO0FBQzVCLElBQUksa0JBQWtCLEdBQUcsRUFBRSxDQUFDO0FBQzVCLElBQUksa0JBQWtCLEdBQUcsRUFBRSxDQUFDO0FBQzVCLElBQUksa0JBQWtCLEdBQUcsRUFBRSxD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QyxLQUFLLENBQUMsQ0FBQztJQUMvRCx3QkFBd0IsR0FBRyxrQkFBa0IsQ0FBQztBQUMvQyxDQUFDO0FBR0QsTUFBTSxVQUFVLDJCQUEyQjtJQUMxQyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUM1QyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUM1QyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUM1QyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUU1QyxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvRCxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvRCxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvRCxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUdoRSxDQUFDO0FBR0QsTUFBTSxVQUFVLHFDQUFxQztJQUNwRCxJQUFJLGtCQUFrQixDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUU1QyxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvRCx3QkFBd0IsR0FBRyxDQUFDLHdCQUF3QixHQUFHLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLE1BQU0sQ0FBQztJQUN0RixrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvRCxDQUFDO0FBRUQsTUFBTSxVQUFVLG9DQUFvQztJQUNuRCxJQUFJLGtCQUFrQixDQUFDLE1BQU0sS0FBSyxDQUFDO1FBQUUsT0FBTztJQUU1QyxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFD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RyxrQkFBa0IsQ0FBQyxNQUFNLENBQUM7SUFDbEgsa0JBQWtCLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDL0QsQ0FBQztBQUlELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSx3QkFBd0IsRUFBRSx3QkFBd0IsRUFBRSx3QkFBd0IsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGN1cnJlbnRTa2luUGxheWVyMV9tdWx0aSA9IDA7XG5sZXQgY3VycmVudFNraW5QbGF5ZXIyX211bHRpID0gMDtcbmxldCBjdXJyZW50U2tpblBsYXllcjNfbXVsdGkgPSAwO1xubGV0IGN1cnJlbnRTa2luUGxheWVyNF9tdWx0aSA9IDA7XG5cbmxldCBkZWZhdWx0U2tpblBsYXllcjEgPSAwO1xubGV0IGRlZmF1bHRTa2luUGxheWVyMiA9IDA7XG5sZXQgZGVmYXVsdFNraW5QbGF5ZXIzID0gMDtcbmxldCBkZWZhdWx0U2tpblBsYXllcjQgPSAwO1xuXG5jb25zdCBza2luUGF0aHMgPSBbXG5cdHsgbmFtZTogXCJwbGF5ZXJfc2tpbl8xXCIsIHBhdGg6IFwiL3NyY3MvZ2FtZS9hc3NldHMvcGxheWVyX3NraW4vXCIsIGZpbGU6IFwicGxheWVyX2JsYW5jLmdsYlwiIH0sXG5cdHsgbmFtZTogXCJwbGF5ZXJfc2tpbl8yXCIsIHBhdGg6IFwiL3NyY3MvZ2FtZS9hc3NldHMvcGxheWVyX3NraW4vXCIsIGZpbGU6IFwicGxheWVyX2JsZXV2Mi5nbGJcIiB9LFxuXHR7IG5hbWU6IFwicGxheWVyX3NraW5fM1wiLCBwYXRoOiBcIi9zcmNzL2dhbWUvYXNzZXRzL3BsYXllcl9za2luL1wiLCBmaWxlOiBcInBsYXllcl9yb3VnZXYyLmdsYlwiIH0sXG5cdHsgbmFtZTogXCJwbGF5ZXJfc2tpbl80XCIsIHBhdGg6IFwiL3NyY3MvZ2FtZS9hc3NldHMvcGxheWVyX3NraW4vXCIsIGZpbGU6IFwicGxheWVyX3ZlcnQuZ2xiXCIgfVxuXTtcblxubGV0IHBsYXllcjFTa2luc19tdWx0aSA9IFtdO1xubGV0IHBsYXllcjJTa2luc19tdWx0aSA9IFtdO1xubGV0IHBsYXllcjNTa2luc19tdWx0aSA9IFtdO1xubGV0IHBsYXllcjRTa2luc19tdWx0aSA9IFtdO1xuXG5cbmZ1bmN0aW9uIGxvYWRTa2luKHNraW4sIHNjZW5lLCB4LCB5LCB6LCBzY2FsZVgsIHNjYWxlWSwgc2NhbGVaKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0QkFCWUxPTi5TY2VuZUxvYWRlci5JbXBvcnRNZXNoKFwiXCIsIHNraW4ucGF0aCwgc2tpbi5maWxlLCBzY2VuZSwgKG1lc2hlcykgPT4ge1xuXHRcdFx0Y29uc3Qgcm9vdE1lc2ggPSBtZXNoZXMuZmluZChtZXNoID0+IG1lc2gubmFtZSA9PT0gXCJfX3Jvb3RfX1wiKTtcblx0XHRcdGlmIChyb290TWVzaCkge1xuXHRcdFx0XHRyb290TWVzaC5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoeCwgeSwgeik7XG5cdFx0XHRcdHJvb3RNZXNoLnNjYWxpbmcgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKHNjYWxlWCwgc2NhbGVZLCBzY2FsZVopO1xuXHRcdFx0XHRyb290TWVzaC5yb3RhdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMCwgMCk7XG5cdFx0XHRcdHJvb3RNZXNoLm1ldGFkYXRhID0geyBpc1BsYXllcl9za2luX21lbnU6IHRydWUgfTtcblxuXHRcdFx0XHRyb290TWVzaC5zZXRFbmFibGVkKGZhbHNlKTtcblx0XHRcdFx0cmVzb2x2ZShyb290TWVzaCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZWplY3QoYEVycmV1ciBsb3JzIGR1IGNoYXJnZW1lbnQgZGUgJHtza2luLm5hbWV9YCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5cbmZ1bmN0aW9uIGxvYWRTa2luc0ZvclBsYXllcihza2luUGF0aHMsIHNjZW5lLCBwbGF5ZXJTa2lucywgb2Zmc2V0WCwgb2Zmc2V0WSwgb2Zmc2V0Wiwgc2NhbGVYLCBzY2FsZVksIHNjYWxlWilcbntcblx0bGV0IGxvYWRQcm9taXNlcyA9IHNraW5QYXRocy5tYXAoKHNraW4pID0+IGxvYWRTa2luKHNraW4sIHNjZW5lLCBvZmZzZXRYLCBvZmZzZXRZLCBvZmZzZXRaLCBzY2FsZVgsIHNjYWxlWSwgc2NhbGVaKSk7XG5cblx0UHJvbWlzZS5hbGwobG9hZFByb21pc2VzKVxuXHRcdC50aGVuKChtZXNoZXMpID0+IHtcblx0XHRcdG1lc2hlcy5mb3JFYWNoKChtZXNoKSA9PlxuXHRcdFx0e1xuXHRcdFx0XHRtZXNoLnBvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMyhvZmZzZXRYLCBvZmZzZXRZLCBvZmZzZXRaKTtcblx0XHRcdFx0cGxheWVyU2tpbnMucHVzaChtZXNoKTtcblx0XHRcdH0pO1xuXHRcdH0pXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X3NraW5zX3BlcnNvX3BsYXllcjFfbXVsdGkoc2NlbmUpIHtcblx0bG9hZFNraW5zRm9yUGxheWVyKHNraW5QYXRocywgc2NlbmUsIHBsYXllcjFTa2luc19tdWx0aSwgLTE2LCAxMDAsIC0yOCwgNCwgNCwgNCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X3NraW5zX3BlcnNvX3BsYXllcjJfbXVsdGkoc2NlbmUpIHtcblx0bG9hZFNraW5zRm9yUGxheWVyKHNraW5QYXRocywgc2NlbmUsIHBsYXllcjJTa2luc19tdWx0aSwgLTI3LCAxMDAsIC0yOCwgNCwgNCwgNCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0X3NraW5zX3BlcnNvX3BsYXllcjNfbXVsdGkoc2NlbmUpIHtcblx0bG9hZFNraW5zRm9yUGxheWVyKHNraW5QYXRocywgc2NlbmUsIHBsYXllcjNTa2luc19tdWx0aSwgLTE0LjUsIDEwMCwgLTIsIDIuNSwgMi41LCAyLjUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdF9za2luc19wZXJzb19wbGF5ZXI0X211bHRpKHNjZW5lKSB7XG5cdGxvYWRTa2luc0ZvclBsYXllcihza2luUGF0aHMsIHNjZW5lLCBwbGF5ZXI0U2tpbnNfbXVsdGksIC0yNi41LCAxMDAsIC0yLCAyLjUsIDIuNSwgMi41KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZV9za2luX211bHRpKCkge1xuXHRpZiAocGxheWVyMVNraW5zX211bHRpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRpZiAocGxheWVyMlNraW5zX211bHRpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRpZiAocGxheWVyM1NraW5zX211bHRpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRpZiAocGxheWVyNFNraW5zX211bHRpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG5cdHBsYXllcjFTa2luc19tdWx0aS5mb3JFYWNoKHNraW4gPT4gc2tpbi5zZXRFbmFibGVkKGZhbHNlKSk7XG5cdHBsYXllcjFTa2luc19tdWx0aVtkZWZhdWx0U2tpblBsYXllcjFdLnNldEVuYWJsZWQodHJ1ZSk7XG5cblx0cGxheWVyMlNraW5zX211bHRpLmZvckVhY2goc2tpbiA9PiBza2luLnNldEVuYWJsZWQoZmFsc2UpKTtcblx0cGxheWVyMlNraW5zX211bHRpW2RlZmF1bHRTa2luUGxheWVyMl0uc2V0RW5hYmxlZCh0cnVlKTtcblxuXHRwbGF5ZXIzU2tpbnNfbXVsdGkuZm9yRWFjaChza2luID0+IHNraW4uc2V0RW5hYmxlZChmYWxzZSkpO1xuXHRwbGF5ZXIzU2tpbnNfbXVsdGlbZGVmYXVsdFNraW5QbGF5ZXIzXS5zZXRFbmFibGVkKHRydWUpO1xuXG5cdHBsYXllcjRTa2luc19tdWx0aS5mb3JFYWNoKHNraW4gPT4gc2tpbi5zZXRFbmFibGVkKGZhbHNlKSk7XG5cdHBsYXllcjRTa2luc19tdWx0aVtkZWZhdWx0U2tpblBsYXllcjRdLnNldEVuYWJsZWQodHJ1ZSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVfc2tpbl9tdWx0aSgpIHtcblx0aWYgKHBsYXllcjFTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblx0aWYgKHBsYXllcjJTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblx0aWYgKHBsYXllcjNTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblx0aWYgKHBsYXllcjRTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRwbGF5ZXIxU2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXIxX211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0Y3VycmVudFNraW5QbGF5ZXIxX211bHRpID0gZGVmYXVsdFNraW5QbGF5ZXIxO1xuXG5cdHBsYXllcjJTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjJfbXVsdGldLnNldEVuYWJsZWQoZmFsc2UpO1xuXHRjdXJyZW50U2tpblBsYXllcjJfbXVsdGkgPSBkZWZhdWx0U2tpblBsYXllcjI7XG5cblx0cGxheWVyM1NraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyM19tdWx0aV0uc2V0RW5hYmxlZChmYWxzZSk7XG5cdGN1cnJlbnRTa2luUGxheWVyM19tdWx0aSA9IGRlZmF1bHRTa2luUGxheWVyMztcblx0XG5cdHBsYXllcjRTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjRfbXVsdGldLnNldEVuYWJsZWQoZmFsc2UpO1xuXHRjdXJyZW50U2tpblBsYXllcjRfbXVsdGkgPSBkZWZhdWx0U2tpblBsYXllcjQ7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVfc2tpbl9hbmRfc2F2ZV9tdWx0aSgpIHtcblx0aWYgKHBsYXllcjFTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblx0aWYgKHBsYXllcjJTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblx0aWYgKHBsYXllcjNTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblx0aWYgKHBsYXllcjRTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRwbGF5ZXIxU2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXIxX211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0cGxheWVyMlNraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyMl9tdWx0aV0uc2V0RW5hYmxlZChmYWxzZSk7XG5cdHBsYXllcjNTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjNfbXVsdGldLnNldEVuYWJsZWQoZmFsc2UpO1xuXHRwbGF5ZXI0U2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXI0X211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblxuXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaF9za2luX3BlcnNvX3BsYXllcjFfcmlnaHRfbXVsdGkoKSB7XG5cdGlmIChwbGF5ZXIxU2tpbnNfbXVsdGkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0cGxheWVyMVNraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyMV9tdWx0aV0uc2V0RW5hYmxlZChmYWxzZSk7XG5cdGN1cnJlbnRTa2luUGxheWVyMV9tdWx0aSA9IChjdXJyZW50U2tpblBsYXllcjFfbXVsdGkgKyAxKSAlIHBsYXllcjFTa2luc19tdWx0aS5sZW5ndGg7XG5cdHBsYXllcjFTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjFfbXVsdGldLnNldEVuYWJsZWQodHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzd2l0Y2hfc2tpbl9wZXJzb19wbGF5ZXIxX2xlZnRfbXVsdGkoKSB7XG5cdGlmIChwbGF5ZXIxU2tpbnNfbXVsdGkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0cGxheWVyMVNraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyMV9tdWx0aV0uc2V0RW5hYmxlZChmYWxzZSk7XG5cdGN1cnJlbnRTa2luUGxheWVyMV9tdWx0aSA9IChjdXJyZW50U2tpblBsYXllcjFfbXVsdGkgLSAxICsgcGxheWVyMVNraW5zX211bHRpLmxlbmd0aCkgJSBwbGF5ZXIxU2tpbnNfbXVsdGkubGVuZ3RoO1xuXHRwbGF5ZXIxU2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXIxX211bHRpXS5zZXRFbmFibGVkKHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3dpdGNoX3NraW5fcGVyc29fcGxheWVyMl9yaWdodF9tdWx0aSgpIHtcblx0aWYgKHBsYXllcjJTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRwbGF5ZXIyU2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXIyX211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0Y3VycmVudFNraW5QbGF5ZXIyX211bHRpID0gKGN1cnJlbnRTa2luUGxheWVyMl9tdWx0aSArIDEpICUgcGxheWVyMlNraW5zX211bHRpLmxlbmd0aDtcblx0cGxheWVyMlNraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyMl9tdWx0aV0uc2V0RW5hYmxlZCh0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaF9za2luX3BlcnNvX3BsYXllcjJfbGVmdF9tdWx0aSgpIHtcblx0aWYgKHBsYXllcjJTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRwbGF5ZXIyU2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXIyX211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0Y3VycmVudFNraW5QbGF5ZXIyX211bHRpID0gKGN1cnJlbnRTa2luUGxheWVyMl9tdWx0aSAtIDEgKyBwbGF5ZXIyU2tpbnNfbXVsdGkubGVuZ3RoKSAlIHBsYXllcjJTa2luc19tdWx0aS5sZW5ndGg7XG5cdHBsYXllcjJTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjJfbXVsdGldLnNldEVuYWJsZWQodHJ1ZSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaF9za2luX3BlcnNvX3BsYXllcjNfcmlnaHRfbXVsdGkoKSB7XG5cdGlmIChwbGF5ZXIzU2tpbnNfbXVsdGkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0cGxheWVyM1NraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyM19tdWx0aV0uc2V0RW5hYmxlZChmYWxzZSk7XG5cdGN1cnJlbnRTa2luUGxheWVyM19tdWx0aSA9IChjdXJyZW50U2tpblBsYXllcjNfbXVsdGkgKyAxKSAlIHBsYXllcjNTa2luc19tdWx0aS5sZW5ndGg7XG5cdHBsYXllcjNTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjNfbXVsdGldLnNldEVuYWJsZWQodHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzd2l0Y2hfc2tpbl9wZXJzb19wbGF5ZXIzX2xlZnRfbXVsdGkoKSB7XG5cdGlmIChwbGF5ZXIzU2tpbnNfbXVsdGkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0cGxheWVyM1NraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyM19tdWx0aV0uc2V0RW5hYmxlZChmYWxzZSk7XG5cdGN1cnJlbnRTa2luUGxheWVyM19tdWx0aSA9IChjdXJyZW50U2tpblBsYXllcjNfbXVsdGkgLSAxICsgcGxheWVyM1NraW5zX211bHRpLmxlbmd0aCkgJSBwbGF5ZXIzU2tpbnNfbXVsdGkubGVuZ3RoO1xuXHRwbGF5ZXIzU2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXIzX211bHRpXS5zZXRFbmFibGVkKHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3dpdGNoX3NraW5fcGVyc29fcGxheWVyNF9yaWdodF9tdWx0aSgpIHtcblx0aWYgKHBsYXllcjRTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRwbGF5ZXI0U2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXI0X211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0Y3VycmVudFNraW5QbGF5ZXI0X211bHRpID0gKGN1cnJlbnRTa2luUGxheWVyNF9tdWx0aSArIDEpICUgcGxheWVyNFNraW5zX211bHRpLmxlbmd0aDtcblx0cGxheWVyNFNraW5zX211bHRpW2N1cnJlbnRTa2luUGxheWVyNF9tdWx0aV0uc2V0RW5hYmxlZCh0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaF9za2luX3BlcnNvX3BsYXllcjRfbGVmdF9tdWx0aSgpIHtcblx0aWYgKHBsYXllcjRTa2luc19tdWx0aS5sZW5ndGggPT09IDApIHJldHVybjtcblxuXHRwbGF5ZXI0U2tpbnNfbXVsdGlbY3VycmVudFNraW5QbGF5ZXI0X211bHRpXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0Y3VycmVudFNraW5QbGF5ZXI0X211bHRpID0gKGN1cnJlbnRTa2luUGxheWVyNF9tdWx0aSAtIDEgKyBwbGF5ZXI0U2tpbnNfbXVsdGkubGVuZ3RoKSAlIHBsYXllcjRTa2luc19tdWx0aS5sZW5ndGg7XG5cdHBsYXllcjRTa2luc19tdWx0aVtjdXJyZW50U2tpblBsYXllcjRfbXVsdGldLnNldEVuYWJsZWQodHJ1ZSk7XG59XG5cblxuXG5leHBvcnQgeyBjdXJyZW50U2tpblBsYXllcjFfbXVsdGksIGN1cnJlbnRTa2luUGxheWVyMl9tdWx0aSwgY3VycmVudFNraW5QbGF5ZXIzX211bHRpLCBjdXJyZW50U2tpblBsYXllcjRfbXVsdGksIHBsYXllcjFTa2luc19tdWx0aSwgcGxheWVyMlNraW5zX211bHRpLCBwbGF5ZXIzU2tpbnNfbXVsdGksIHBsYXllcjRTa2luc19tdWx0aSB9OyJdfQ==