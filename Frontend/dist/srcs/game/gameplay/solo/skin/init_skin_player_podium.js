import { currentSkinPlayer1, currentSkinPlayer2 } from "./init_skin_perso.js";
import { getPlayer_1_win, getPlayer_2_win } from "../../score.js";
let currentSkinPlayerFirst = 0;
let currentSkinPlayerSeconde = 0;
let defaultSkinPlayerFirst = 0;
let defaultSkinPlayerSeconde = 0;
const skinPaths = [
    { name: "player_skin_1", path: "/srcs/game/assets/player_skin/", file: "player_blanc.glb" },
    { name: "player_skin_2", path: "/srcs/game/assets/player_skin/", file: "player_bleuv2.glb" },
    { name: "player_skin_3", path: "/srcs/game/assets/player_skin/", file: "player_rougev2.glb" },
    { name: "player_skin_4", path: "/srcs/game/assets/player_skin/", file: "player_vert.glb" }
];
let player1Skins_podium = [];
let player2Skins_podium = [];
function loadSkin(skin, scene, x, y, z) {
    return new Promise((resolve, reject) => {
        BABYLON.SceneLoader.ImportMesh("", skin.path, skin.file, scene, (meshes) => {
            const rootMesh = meshes.find(mesh => mesh.name === "__root__");
            if (rootMesh) {
                rootMesh.position = new BABYLON.Vector3(x, y, z);
                rootMesh.scaling = new BABYLON.Vector3(4, 4, 4);
                rootMesh.rotation = new BABYLON.Vector3(0, Math.PI / 2, 0);
                rootMesh.metadata = { isPlayer_skin_podium: true };
                rootMesh.setEnabled(false);
                resolve(rootMesh);
            }
        });
    });
}
function loadSkinsForPlayer(skinPaths, scene, playerSkins, x, y, z) {
    let loadPromises = skinPaths.map((skin) => loadSkin(skin, scene, x, y, z));
    Promise.all(loadPromises)
        .then((meshes) => {
        meshes.forEach((mesh, index) => {
            playerSkins.push(mesh);
        });
    })
        .catch((error) => {
        console.error(error);
    });
}
export function init_skins_perso_first(scene) {
    loadSkinsForPlayer(skinPaths, scene, player1Skins_podium, -63, 304.5, -55);
}
export function init_skins_perso_seconde(scene) {
    loadSkinsForPlayer(skinPaths, scene, player2Skins_podium, -63, 303, -50);
}
export function enable_skin_perso_player_first_and_second() {
    let isPlayer1_win_score = getPlayer_1_win();
    let isPlayer2_win_score = getPlayer_2_win();
    console.log("enable_skin_perso_player_first_and_second");
    console.log("isPlayer1_win_score: ", isPlayer1_win_score);
    console.log("isPlayer2_win_score: ", isPlayer2_win_score);
    console.log("player1Skins_podium: ", player1Skins_podium);
    console.log("player2Skins_podium: ", player2Skins_podium);
    if (player1Skins_podium.length === 0)
        return;
    if (player2Skins_podium.length === 0)
        return;
    if (isPlayer1_win_score && !isPlayer2_win_score) {
        currentSkinPlayerFirst = currentSkinPlayer1;
        currentSkinPlayerSeconde = currentSkinPlayer2;
        player1Skins_podium.forEach(skin => skin.setEnabled(false));
        player1Skins_podium[currentSkinPlayerFirst].setEnabled(true);
        player2Skins_podium.forEach(skin => skin.setEnabled(false));
        player2Skins_podium[currentSkinPlayerSeconde].setEnabled(true);
    }
    else if (isPlayer2_win_score && !isPlayer1_win_score) {
        currentSkinPlayerFirst = currentSkinPlayer2;
        currentSkinPlayerSeconde = currentSkinPlayer1;
        player1Skins_podium.forEach(skin => skin.setEnabled(false));
        player1Skins_podium[currentSkinPlayerFirst].setEnabled(true);
        player2Skins_podium.forEach(skin => skin.setEnabled(false));
        player2Skins_podium[currentSkinPlayerSeconde].setEnabled(true);
    }
}
export function disable_skin_perso_player_first_and_seconde() {
    if (player1Skins_podium.length === 0)
        return;
    if (player2Skins_podium.length === 0)
        return;
    player1Skins_podium[currentSkinPlayerFirst].setEnabled(false);
    currentSkinPlayerFirst = defaultSkinPlayerFirst;
    player2Skins_podium[currentSkinPlayerSeconde].setEnabled(false);
    currentSkinPlayerSeconde = defaultSkinPlayerSeconde;
}
export { currentSkinPlayerFirst, currentSkinPlayerSeconde, player1Skins_podium, player2Skins_podium };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdF9za2luX3BsYXllcl9wb2RpdW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wdWJsaWMvc3Jjcy9nYW1lL2dhbWVwbGF5L3NvbG8vc2tpbi9pbml0X3NraW5fcGxheWVyX3BvZGl1bS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUM5RSxPQUFPLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRWxFLElBQUksc0JBQXNCLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLElBQUksd0JBQXdCLEdBQUcsQ0FBQyxDQUFDO0FBQ2pDLElBQUksc0JBQXNCLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLElBQUksd0JBQXdCLEdBQUcsQ0FBQyxDQUFDO0FBRWpDLE1BQU0sU0FBUyxHQUFHO0lBQ2QsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLEVBQUU7SUFDM0YsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsbUJBQW1CLEVBQUU7SUFDNUYsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsb0JBQW9CLEVBQUU7SUFDN0YsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUU7Q0FDN0YsQ0FBQztBQUVGLElBQUksbUJBQW1CLEdBQUcsRUFBRSxDQUFDO0FBQzdCLElBQUksbUJBQW1CLEdBQUcsRUFBRSxDQUFDO0FBRTdCLFNBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQ2xDLE9BQU8sSUFB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QUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDNUQsbUJBQW1CLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDaEUsQ0FBQztBQUNGLENBQUM7QUFFRCxNQUFNLFVBQVUsMkNBQTJDO0lBRXZELElBQUksbUJBQW1CLENBQUMsTUFBTSxLQUFLLENBQUM7UUFBRSxPQUFPO0lBQzdDLElBQUksbUJBQW1CLENBQUMsTUFBTSxLQUFLLENBQUM7UUFBRSxPQUFPO0lBRTdDLG1CQUFtQixDQUFDLHNCQUFzQixDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pFLHNCQUFzQixHQUFHLHNCQUFzQixDQUFDO0lBRTdDLG1CQUFtQixDQUFDLHdCQUF3QixDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25FLHdCQUF3QixHQUFHLHdCQUF3QixDQUFDO0FBQ3JELENBQUM7QUFHRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsd0JBQXdCLEVBQUUsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGN1cnJlbnRTa2luUGxheWVyMSwgY3VycmVudFNraW5QbGF5ZXIyIH0gZnJvbSBcIi4vaW5pdF9za2luX3BlcnNvLmpzXCI7XG5pbXBvcnQgeyBnZXRQbGF5ZXJfMV93aW4sIGdldFBsYXllcl8yX3dpbiB9IGZyb20gXCIuLi8uLi9zY29yZS5qc1wiO1xuXG5sZXQgY3VycmVudFNraW5QbGF5ZXJGaXJzdCA9IDA7XG5sZXQgY3VycmVudFNraW5QbGF5ZXJTZWNvbmRlID0gMDtcbmxldCBkZWZhdWx0U2tpblBsYXllckZpcnN0ID0gMDtcbmxldCBkZWZhdWx0U2tpblBsYXllclNlY29uZGUgPSAwO1xuXG5jb25zdCBza2luUGF0aHMgPSBbXG4gICAgeyBuYW1lOiBcInBsYXllcl9za2luXzFcIiwgcGF0aDogXCIvc3Jjcy9nYW1lL2Fzc2V0cy9wbGF5ZXJfc2tpbi9cIiwgZmlsZTogXCJwbGF5ZXJfYmxhbmMuZ2xiXCIgfSxcbiAgICB7IG5hbWU6IFwicGxheWVyX3NraW5fMlwiLCBwYXRoOiBcIi9zcmNzL2dhbWUvYXNzZXRzL3BsYXllcl9za2luL1wiLCBmaWxlOiBcInBsYXllcl9ibGV1djIuZ2xiXCIgfSxcbiAgICB7IG5hbWU6IFwicGxheWVyX3NraW5fM1wiLCBwYXRoOiBcIi9zcmNzL2dhbWUvYXNzZXRzL3BsYXllcl9za2luL1wiLCBmaWxlOiBcInBsYXllcl9yb3VnZXYyLmdsYlwiIH0sXG4gICAgeyBuYW1lOiBcInBsYXllcl9za2luXzRcIiwgcGF0aDogXCIvc3Jjcy9nYW1lL2Fzc2V0cy9wbGF5ZXJfc2tpbi9cIiwgZmlsZTogXCJwbGF5ZXJfdmVydC5nbGJcIiB9XG5dO1xuXG5sZXQgcGxheWVyMVNraW5zX3BvZGl1bSA9IFtdO1xubGV0IHBsYXllcjJTa2luc19wb2RpdW0gPSBbXTtcblxuZnVuY3Rpb24gbG9hZFNraW4oc2tpbiwgc2NlbmUsIHgsIHksIHopIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBCQUJZTE9OLlNjZW5lTG9hZGVyLkltcG9ydE1lc2goXCJcIiwgc2tpbi5wYXRoLCBza2luLmZpbGUsIHNjZW5lLCAobWVzaGVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb290TWVzaCA9IG1lc2hlcy5maW5kKG1lc2ggPT4gbWVzaC5uYW1lID09PSBcIl9fcm9vdF9fXCIpO1xuICAgICAgICAgICAgaWYgKHJvb3RNZXNoKVxuXHRcdFx0e1xuICAgICAgICAgICAgICAgIHJvb3RNZXNoLnBvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgICAgICAgICByb290TWVzaC5zY2FsaW5nID0gbmV3IEJBQllMT04uVmVjdG9yMyg0LCA0LCA0KTtcbiAgICAgICAgICAgICAgICByb290TWVzaC5yb3RhdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgTWF0aC5QSS8yLCAwKTtcbiAgICAgICAgICAgICAgICByb290TWVzaC5tZXRhZGF0YSA9IHsgaXNQbGF5ZXJfc2tpbl9wb2RpdW06IHRydWUgfTtcbiAgICAgICAgICAgICAgICByb290TWVzaC5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJvb3RNZXNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRTa2luc0ZvclBsYXllcihza2luUGF0aHMsIHNjZW5lLCBwbGF5ZXJTa2lucywgeCwgeSwgeilcbntcbiAgICBsZXQgbG9hZFByb21pc2VzID0gc2tpblBhdGhzLm1hcCgoc2tpbikgPT4gbG9hZFNraW4oc2tpbiwgc2NlbmUsIHgsIHksIHopKTtcblxuICAgIFByb21pc2UuYWxsKGxvYWRQcm9taXNlcylcbiAgICAgICAgLnRoZW4oKG1lc2hlcykgPT4ge1xuICAgICAgICAgICAgbWVzaGVzLmZvckVhY2goKG1lc2gsIGluZGV4KSA9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBsYXllclNraW5zLnB1c2gobWVzaCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdF9za2luc19wZXJzb19maXJzdChzY2VuZSlcbntcbiAgICBsb2FkU2tpbnNGb3JQbGF5ZXIoc2tpblBhdGhzLCBzY2VuZSwgcGxheWVyMVNraW5zX3BvZGl1bSwgLTYzLCAzMDQuNSwgLTU1KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRfc2tpbnNfcGVyc29fc2Vjb25kZShzY2VuZSlcbntcbiAgICBsb2FkU2tpbnNGb3JQbGF5ZXIoc2tpblBhdGhzLCBzY2VuZSwgcGxheWVyMlNraW5zX3BvZGl1bSwgLTYzLCAzMDMsIC01MFx0KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlX3NraW5fcGVyc29fcGxheWVyX2ZpcnN0X2FuZF9zZWNvbmQoKVxue1xuXHRsZXQgaXNQbGF5ZXIxX3dpbl9zY29yZSA9IGdldFBsYXllcl8xX3dpbigpO1xuXHRsZXQgaXNQbGF5ZXIyX3dpbl9zY29yZSA9IGdldFBsYXllcl8yX3dpbigpO1xuXG4gICAgY29uc29sZS5sb2coXCJlbmFibGVfc2tpbl9wZXJzb19wbGF5ZXJfZmlyc3RfYW5kX3NlY29uZFwiKTtcbiAgICBjb25zb2xlLmxvZyhcImlzUGxheWVyMV93aW5fc2NvcmU6IFwiLCBpc1BsYXllcjFfd2luX3Njb3JlKTtcbiAgICBjb25zb2xlLmxvZyhcImlzUGxheWVyMl93aW5fc2NvcmU6IFwiLCBpc1BsYXllcjJfd2luX3Njb3JlKTtcblxuICAgIGNvbnNvbGUubG9nKFwicGxheWVyMVNraW5zX3BvZGl1bTogXCIsIHBsYXllcjFTa2luc19wb2RpdW0pO1xuICAgIGNvbnNvbGUubG9nKFwicGxheWVyMlNraW5zX3BvZGl1bTogXCIsIHBsYXllcjJTa2luc19wb2RpdW0pO1xuXHRpZiAocGxheWVyMVNraW5zX3BvZGl1bS5sZW5ndGggPT09IDApXG5cdFx0cmV0dXJuO1xuXHRpZiAocGxheWVyMlNraW5zX3BvZGl1bS5sZW5ndGggPT09IDApXG5cdFx0cmV0dXJuO1xuXHRpZiAoaXNQbGF5ZXIxX3dpbl9zY29yZSAmJiAhaXNQbGF5ZXIyX3dpbl9zY29yZSlcblx0e1xuXHRcdGN1cnJlbnRTa2luUGxheWVyRmlyc3QgPSBjdXJyZW50U2tpblBsYXllcjE7XG5cdFx0Y3VycmVudFNraW5QbGF5ZXJTZWNvbmRlID0gY3VycmVudFNraW5QbGF5ZXIyO1xuXG5cdFx0cGxheWVyMVNraW5zX3BvZGl1bS5mb3JFYWNoKHNraW4gPT4gc2tpbi5zZXRFbmFibGVkKGZhbHNlKSk7XG5cdFx0cGxheWVyMVNraW5zX3BvZGl1bVtjdXJyZW50U2tpblBsYXllckZpcnN0XS5zZXRFbmFibGVkKHRydWUpO1xuXHRcdFxuXHRcdHBsYXllcjJTa2luc19wb2RpdW0uZm9yRWFjaChza2luID0+IHNraW4uc2V0RW5hYmxlZChmYWxzZSkpO1xuXHRcdHBsYXllcjJTa2luc19wb2RpdW1bY3VycmVudFNraW5QbGF5ZXJTZWNvbmRlXS5zZXRFbmFibGVkKHRydWUpO1xuXHR9XG5cdGVsc2UgaWYgKGlzUGxheWVyMl93aW5fc2NvcmUgJiYgIWlzUGxheWVyMV93aW5fc2NvcmUpXG5cdHtcblx0XHRjdXJyZW50U2tpblBsYXllckZpcnN0ID0gY3VycmVudFNraW5QbGF5ZXIyO1xuXHRcdGN1cnJlbnRTa2luUGxheWVyU2Vjb25kZSA9IGN1cnJlbnRTa2luUGxheWVyMTtcblxuXHRcdHBsYXllcjFTa2luc19wb2RpdW0uZm9yRWFjaChza2luID0+IHNraW4uc2V0RW5hYmxlZChmYWxzZSkpO1xuXHRcdHBsYXllcjFTa2luc19wb2RpdW1bY3VycmVudFNraW5QbGF5ZXJGaXJzdF0uc2V0RW5hYmxlZCh0cnVlKTtcblx0XHRcblx0XHRwbGF5ZXIyU2tpbnNfcG9kaXVtLmZvckVhY2goc2tpbiA9PiBza2luLnNldEVuYWJsZWQoZmFsc2UpKTtcblx0XHRwbGF5ZXIyU2tpbnNfcG9kaXVtW2N1cnJlbnRTa2luUGxheWVyU2Vjb25kZV0uc2V0RW5hYmxlZCh0cnVlKTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZV9za2luX3BlcnNvX3BsYXllcl9maXJzdF9hbmRfc2Vjb25kZSgpXG57XG4gICAgaWYgKHBsYXllcjFTa2luc19wb2RpdW0ubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgaWYgKHBsYXllcjJTa2luc19wb2RpdW0ubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBwbGF5ZXIxU2tpbnNfcG9kaXVtW2N1cnJlbnRTa2luUGxheWVyRmlyc3RdLnNldEVuYWJsZWQoZmFsc2UpO1xuXHRjdXJyZW50U2tpblBsYXllckZpcnN0ID0gZGVmYXVsdFNraW5QbGF5ZXJGaXJzdDtcblxuICAgIHBsYXllcjJTa2luc19wb2RpdW1bY3VycmVudFNraW5QbGF5ZXJTZWNvbmRlXS5zZXRFbmFibGVkKGZhbHNlKTtcblx0Y3VycmVudFNraW5QbGF5ZXJTZWNvbmRlID0gZGVmYXVsdFNraW5QbGF5ZXJTZWNvbmRlO1xufVxuXG5cbmV4cG9ydCB7IGN1cnJlbnRTa2luUGxheWVyRmlyc3QsIGN1cnJlbnRTa2luUGxheWVyU2Vjb25kZSwgcGxheWVyMVNraW5zX3BvZGl1bSwgcGxheWVyMlNraW5zX3BvZGl1bSB9OyJdfQ==