import { c, canvas, gameState, GameState } from './constants.js';
export default class Option {
    constructor() {
        this.title = "Options";
        this.titlefont = "bold 30px 'Press Start 2P', Black Ops One";
        this.control = " Control :";
        this.move_left = " Move Left : Arrow Left";
        this.jump = " Jump : Arrow Up";
        this.move_right = " Move Right : Arrow Right";
        this.move_down = " Move Down : Arrow Down";
        this.options = ["Retour"];
        this.selectedOption = 0;
        this.optionFont = "20px 'Press Start 2P', Black Ops One";
        this.keyPressed = {};
        this.boundKeyDown = this.handleKeyDown.bind(this);
        this.boundKeyUp = this.handleKeyUp.bind(this);
    }
    enableControls() {
        window.addEventListener("keydown", this.boundKeyDown);
        window.addEventListener("keyup", this.boundKeyUp);
    }
    disableControls() {
        window.removeEventListener("keydown", this.boundKeyDown);
        window.removeEventListener("keyup", this.boundKeyUp);
    }
    draw() {
        this.enableControls();
        c.fillStyle = "rgba(0, 0, 0, 0.75)";
        c.fillRect(0, 0, canvas.width, canvas.height);
        c.fillStyle = "#FFD700";
        c.font = this.titlefont;
        c.shadowColor = "#000";
        c.textAlign = "left";
        c.fillText(this.title, 450, 100);
        c.font = this.optionFont;
        c.fillText(this.control, 100, canvas.height / 2 - 50);
        c.fillText(this.move_left, 220, 260 - 20);
        c.fillText(this.move_right, 220, 260 + 10);
        c.fillText(this.move_down, 220, 260 + 40);
        c.fillText(this.jump, 220, 260 + 70);
        const optionPositions = [
            { x: 900, y: 550 }, // position de "Retour"
        ];
        c.font = this.optionFont;
        this.options.forEach((option, index) => {
            const pos = optionPositions[index];
            if (option === "Retour" && index === this.selectedOption) {
                c.fillStyle = "red"; // Rouge si "Retour" est sélectionné
            }
            else {
                c.fillStyle = "white"; // Sinon blanc
            }
            c.fillText(option, pos.x, pos.y);
            c.fillStyle = "white";
        });
    }
    handleKeyDown(event) {
        const key = event.key;
        if (this.keyPressed[key])
            return;
        this.keyPressed[key] = true;
        switch (key) {
            case "ArrowUp":
            case "w":
                this.selectedOption = (this.selectedOption - 1 + this.options.length) % this.options.length;
                break;
            case "ArrowDown":
            case "s":
                this.selectedOption = (this.selectedOption + 1) % this.options.length;
                break;
            case "Enter":
                this.handleSelect();
                break;
        }
    }
    handleKeyUp(event) {
        this.keyPressed[event.key] = false;
    }
    handleSelect() {
        const selected = this.options[this.selectedOption];
        if (selected === "Retour") {
            this.disableControls();
            gameState.previous = gameState.current;
            gameState.current = GameState.Menu;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3B0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHVibGljL3N0YXRpYy9qcy92aWV3cy9wbGF0Zm9ybWVyL29wdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFakUsTUFBTSxDQUFDLE9BQU8sT0FBTyxNQUFNO0lBQzFCO1FBRUMsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUE7UUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRywyQ0FBMkMsQ0FBQztRQUM3RCxJQUFJLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQztRQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLHlCQUF5QixDQUFDO1FBQzNDLElBQUksQ0FBQyxJQUFJLEdBQUcsa0JBQWtCLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsR0FBRywyQkFBMkIsQ0FBQztRQUM5QyxJQUFJLENBQUMsU0FBUyxHQUFHLHlCQUF5QixDQUFDO1FBQzNDLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQztRQUV4QixJQUFJLENBQUMsVUFBVSxHQUFHLHNDQUFzQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQsY0FBYztRQUViLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3RE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LFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7UUFFNUIsUUFBUSxHQUFHLEVBQUUsQ0FBQztZQUNiLEtBQUssU0FBUyxDQUFDO1lBQ2YsS0FBSyxHQUFHO2dCQUNQLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO2dCQUM1RixNQUFNO1lBQ1AsS0FBSyxXQUFXLENBQUM7WUFDakIsS0FBSyxHQUFHO2dCQUNQLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO2dCQUN0RSxNQUFNO1lBQ1AsS0FBSyxPQUFPO2dCQUNYLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFDcEIsTUFBTTtRQUNSLENBQUM7SUFDRixDQUFDO0lBRUQsV0FBVyxDQUFDLEtBQUs7UUFDaEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxZQUFZO1FBRVgsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDbkQsSUFBSSxRQUFRLEtBQUssUUFBUSxFQUN6QixDQUFDO1lBQ0EsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3ZCLFNBQVMsQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQztZQUN2QyxTQUFTLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFDcEMsQ0FBQztJQUNGLENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGMsIGNhbnZhcywgZ2FtZVN0YXRlLCBHYW1lU3RhdGUgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9wdGlvbiB7XG5cdGNvbnN0cnVjdG9yKClcblx0e1xuXHRcdHRoaXMudGl0bGUgPSBcIk9wdGlvbnNcIlxuXHRcdHRoaXMudGl0bGVmb250ID0gXCJib2xkIDMwcHggJ1ByZXNzIFN0YXJ0IDJQJywgQmxhY2sgT3BzIE9uZVwiO1xuXHRcdHRoaXMuY29udHJvbCA9IFwiIENvbnRyb2wgOlwiO1xuXHRcdHRoaXMubW92ZV9sZWZ0ID0gXCIgTW92ZSBMZWZ0IDogQXJyb3cgTGVmdFwiO1xuXHRcdHRoaXMuanVtcCA9IFwiIEp1bXAgOiBBcnJvdyBVcFwiO1xuXHRcdHRoaXMubW92ZV9yaWdodCA9IFwiIE1vdmUgUmlnaHQgOiBBcnJvdyBSaWdodFwiO1xuXHRcdHRoaXMubW92ZV9kb3duID0gXCIgTW92ZSBEb3duIDogQXJyb3cgRG93blwiO1xuXHRcdHRoaXMub3B0aW9ucyA9IFtcIlJldG91clwiXTtcblx0XHR0aGlzLnNlbGVjdGVkT3B0aW9uID0gMDtcblxuXHRcdHRoaXMub3B0aW9uRm9udCA9IFwiMjBweCAnUHJlc3MgU3RhcnQgMlAnLCBCbGFjayBPcHMgT25lXCI7XG5cdFx0dGhpcy5rZXlQcmVzc2VkID0ge307XG5cdFx0dGhpcy5ib3VuZEtleURvd24gPSB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKTtcblx0XHR0aGlzLmJvdW5kS2V5VXAgPSB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcyk7XG5cdH1cblxuXHRlbmFibGVDb250cm9scygpIHtcblxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmJvdW5kS2V5RG93bik7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmJvdW5kS2V5VXApO1xuXHR9XG5cblx0ZGlzYWJsZUNvbnRyb2xzKCkge1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmJvdW5kS2V5RG93bik7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmJvdW5kS2V5VXApO1xuXHR9XG5cblx0ZHJhdygpXG5cdHtcblx0XHR0aGlzLmVuYWJsZUNvbnRyb2xzKCk7XG5cblx0XHRjLmZpbGxTdHlsZSA9IFwicmdiYSgwLCAwLCAwLCAwLjc1KVwiO1xuXHRcdGMuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblx0XHRjLmZpbGxTdHlsZSA9IFwiI0ZGRDcwMFwiO1xuXHRcdGMuZm9udCA9IHRoaXMudGl0bGVmb250O1xuXHRcdGMuc2hhZG93Q29sb3IgPSBcIiMwMDBcIjtcblx0XHRjLnRleHRBbGlnbiA9IFwibGVmdFwiO1xuXHRcdGMuZmlsbFRleHQodGhpcy50aXRsZSwgNDUwLCAxMDApO1xuXHRcdGMuZm9udCA9IHRoaXMub3B0aW9uRm9udDtcblx0XHRjLmZpbGxUZXh0KHRoaXMuY29udHJvbCwgMTAwLCBjYW52YXMuaGVpZ2h0IC8gMiAtIDUwKTtcblx0XHRjLmZpbGxUZXh0KHRoaXMubW92ZV9sZWZ0LCAyMjAsIDI2MCAtIDIwKTtcblx0XHRjLmZpbGxUZXh0KHRoaXMubW92ZV9yaWdodCwgMjIwLCAyNjAgKyAxMCk7XG5cdFx0Yy5maWxsVGV4dCh0aGlzLm1vdmVfZG93biwgMjIwLCAyNjAgKyA0MCk7XG5cdFx0Yy5maWxsVGV4dCh0aGlzLmp1bXAsIDIyMCwgMjYwICsgNzApO1xuXG5cdFx0Y29uc3Qgb3B0aW9uUG9zaXRpb25zID0gW1xuXHRcdFx0eyB4OiA5MDAsIHk6IDU1MCB9LCAvLyBwb3NpdGlvbiBkZSBcIlJldG91clwiXG5cdFx0XTtcblx0XG5cdFx0Yy5mb250ID0gdGhpcy5vcHRpb25Gb250O1xuXG5cdFx0dGhpcy5vcHRpb25zLmZvckVhY2goKG9wdGlvbiwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IHBvcyA9IG9wdGlvblBvc2l0aW9uc1tpbmRleF07XG5cdFx0XHRpZiAob3B0aW9uID09PSBcIlJldG91clwiICYmIGluZGV4ID09PSB0aGlzLnNlbGVjdGVkT3B0aW9uKSB7XG5cdFx0XHRcdGMuZmlsbFN0eWxlID0gXCJyZWRcIjsgLy8gUm91Z2Ugc2kgXCJSZXRvdXJcIiBlc3Qgc8OpbGVjdGlvbm7DqVxuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjLmZpbGxTdHlsZSA9IFwid2hpdGVcIjsgLy8gU2lub24gYmxhbmNcblx0XHRcdH1cblx0XHRcdGMuZmlsbFRleHQob3B0aW9uLCBwb3MueCwgcG9zLnkpO1xuXHRcdFx0Yy5maWxsU3R5bGUgPSBcIndoaXRlXCI7XG5cdFx0fSk7XG5cdH1cblxuXHRoYW5kbGVLZXlEb3duKGV2ZW50KSB7XG5cdFx0Y29uc3Qga2V5ID0gZXZlbnQua2V5O1xuXHRcdGlmICh0aGlzLmtleVByZXNzZWRba2V5XSkgcmV0dXJuO1xuXHRcdHRoaXMua2V5UHJlc3NlZFtrZXldID0gdHJ1ZTtcblxuXHRcdHN3aXRjaCAoa2V5KSB7XG5cdFx0XHRjYXNlIFwiQXJyb3dVcFwiOlxuXHRcdFx0Y2FzZSBcIndcIjpcblx0XHRcdFx0dGhpcy5zZWxlY3RlZE9wdGlvbiA9ICh0aGlzLnNlbGVjdGVkT3B0aW9uIC0gMSArIHRoaXMub3B0aW9ucy5sZW5ndGgpICUgdGhpcy5vcHRpb25zLmxlbmd0aDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiQXJyb3dEb3duXCI6XG5cdFx0XHRjYXNlIFwic1wiOlxuXHRcdFx0XHR0aGlzLnNlbGVjdGVkT3B0aW9uID0gKHRoaXMuc2VsZWN0ZWRPcHRpb24gKyAxKSAlIHRoaXMub3B0aW9ucy5sZW5ndGg7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIkVudGVyXCI6XG5cdFx0XHRcdHRoaXMuaGFuZGxlU2VsZWN0KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdGhhbmRsZUtleVVwKGV2ZW50KSB7XG5cdFx0dGhpcy5rZXlQcmVzc2VkW2V2ZW50LmtleV0gPSBmYWxzZTtcblx0fVxuXG5cdGhhbmRsZVNlbGVjdCgpXG5cdHtcblx0XHRjb25zdCBzZWxlY3RlZCA9IHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkT3B0aW9uXTtcblx0XHRpZiAoc2VsZWN0ZWQgPT09IFwiUmV0b3VyXCIpXG5cdFx0e1xuXHRcdFx0dGhpcy5kaXNhYmxlQ29udHJvbHMoKTtcblx0XHRcdGdhbWVTdGF0ZS5wcmV2aW91cyA9IGdhbWVTdGF0ZS5jdXJyZW50O1xuXHRcdFx0Z2FtZVN0YXRlLmN1cnJlbnQgPSBHYW1lU3RhdGUuTWVudTtcblx0XHR9XG5cdH1cbn0iXX0=